<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Salon Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
</head>
<body class="bg-gradient-to-br from-red-50 to-red-100 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">ðŸ’ˆ Salon Panel</h1>
            <p class="text-gray-600">Sistema de Agendamento para SalÃµes</p>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Entrar na sua conta</h2>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input 
                        type="email" 
                        id="email" 
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        placeholder="seu@email.com"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                    <input 
                        type="password" 
                        id="password" 
                        required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                    />
                </div>

                <button 
                    type="submit" 
                    id="loginBtn"
                    class="w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors font-medium"
                >
                    Entrar
                </button>
            </form>

            <div id="error" class="hidden mt-4 p-3 bg-red-100 text-red-700 rounded-lg text-sm"></div>
            <div id="success" class="hidden mt-4 p-3 bg-green-100 text-green-700 rounded-lg text-sm"></div>
        </div>
    </div>

    <script>
        // ConfiguraÃ§Ã£o do Supabase
        const SUPABASE_URL = 'https://kxdmigytkedpahccfraa.supabase.co'
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4ZG1pZ3l0a2VkcGFoY2NmcmFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxNDkxMjAsImV4cCI6MjA4MzcyNTEyMH0.-QQCRguA4oPqM3p4Mpq7JB8XEmhdj5VlT62K_TS2q4o'
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY)
        
        const form = document.getElementById('loginForm')
        const loginBtn = document.getElementById('loginBtn')
        const errorDiv = document.getElementById('error')
        const successDiv = document.getElementById('success')

        form.addEventListener('submit', async (e) => {
            e.preventDefault()
            
            loginBtn.disabled = true
            loginBtn.textContent = 'Entrando...'
            errorDiv.classList.add('hidden')
            successDiv.classList.add('hidden')

            const email = document.getElementById('email').value
            const password = document.getElementById('password').value

            try {
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password,
                })

                if (error) throw error

                successDiv.textContent = 'Login realizado com sucesso!'
                successDiv.classList.remove('hidden')

                setTimeout(() => {
                    window.location.href = 'app.html'
                }, 1000)

            } catch (error) {
                console.error('Erro:', error)
                errorDiv.textContent = error.message || 'Erro ao fazer login'
                errorDiv.classList.remove('hidden')
                loginBtn.disabled = false
                loginBtn.textContent = 'Entrar'
            }
        })

        // Verificar se jÃ¡ estÃ¡ logado
        supabase.auth.getSession().then(({ data: { session } }) => {
            if (session) {
                window.location.href = 'app.html'
            }
        })
    </script>
</body>
</html>
